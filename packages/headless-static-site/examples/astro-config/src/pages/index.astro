---
import BaseLayout from "../layouts/BaseLayout.astro";
import { iiif } from "../lib/iiif-server";

const top = await iiif.loadTopCollection();
const manifests = await iiif.getAllManifests();
const manifestPaths = await iiif.getManifestStaticPaths();
---

<BaseLayout title="IIIF Astro Example">
  <section class="stack">
    <h1>IIIF + Astro Example (iiif-config folder)</h1>
    <p class="small">
      This site loads IIIF stores from <code>iiif-config/stores/*.json</code>. Static manifest routes are generated at build time using{" "}
      <code>iiif-hss/astro/server</code>.
    </p>
    <div class="panel stack">
      <a href="/collection">Open collection page</a>
      <p class="small">Top collection items: {top?.items?.length ?? 0}</p>
      <p class="small">Manifest routes generated: {manifestPaths.length}</p>
      <p class="small">Manifest collection label: {manifests?.label?.en?.[0] ?? "Unknown"}</p>
    </div>
  </section>
</BaseLayout>
